<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>TINGO NEWS - Fast · Convenient · Authentic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #d32f2f;
      --primary-dark: #b71c1c;
      --accent: #f97316;
      --bg: #f3f4f6;
      --text-main: #111827;
      --text-sub: #6b7280;
      --radius-lg: 16px;
      --radius-md: 10px;
      --shadow-soft: 0 16px 40px rgba(15,23,42,.12);
      --transition-fast: 180ms ease-out;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #fee2e2 0, #f3f4f6 45%, #e5e7eb 100%);
      color: var(--text-main);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* ===== HEADER ===== */
    header {
      position: sticky;
      top: 0;
      z-index: 40;
      backdrop-filter: blur(14px);
      background: rgba(255,255,255,.96);
      border-bottom: 1px solid rgba(209,213,219,.7);
    }

    .header-inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 10px 16px 8px;
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .logo-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border-radius: 999px;
      background: linear-gradient(to right, #fee2e2, #e0f2fe);
      box-shadow: 0 8px 20px rgba(248,113,113,.35);
    }

    .logo {
      height: 44px;
      max-width: 220px;
      display: block;
    }

    .header-text h1 {
      font-size: 22px;
      letter-spacing: .12em;
      text-transform: uppercase;
    }

    .header-text p {
      font-size: 12px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: .16em;
      margin-top: 3px;
    }

    @media (max-width: 640px) {
      .logo {
        height: 34px;
      }
      .header-text h1 {
        font-size: 18px;
      }
      .header-inner {
        justify-content: center;
      }
    }

    /* ===== THANH CHUYÊN MỤC ===== */
    .category-bar {
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      padding: 8px 16px 12px;
      border-top: 1px solid rgba(229,231,235,.9);
      border-bottom: 1px solid rgba(229,231,235,.9);
      background: radial-gradient(circle at top, #fee2e2 0, #ffffff 55%);
    }

    .cat-btn {
      border: 0;
      background: #ffffff;
      color: var(--text-sub);
      padding: 6px 14px;
      font-size: 13px;
      border-radius: 999px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 1px 4px rgba(15,23,42,.1);
      transition: background var(--transition-fast), color var(--transition-fast),
                  transform var(--transition-fast), box-shadow var(--transition-fast);
    }

    .cat-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #e5e7eb;
    }

    .cat-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(15,23,42,.12);
    }

    .cat-btn.active {
      background: var(--primary);
      color: #ffffff;
    }

    .cat-btn.active .cat-dot {
      background: #fecaca;
    }

    /* ===== LAYOUT CHÍNH ===== */
    .page-wrap {
      padding: 20px 16px 32px;
    }

    .container {
      max-width: 1120px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.9fr);
      gap: 24px;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .container {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: rgba(255,255,255,.96);
      border-radius: var(--radius-lg);
      padding: 18px 18px 20px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(243,244,246,.95);
      animation: fadeInUp 320ms ease-out;
    }

    /* ===== DANH SÁCH TIN ===== */
    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .sidebar-title {
      font-size: 16px;
      font-weight: 600;
    }

    .sidebar-tag {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .16em;
      color: var(--text-sub);
    }

    .news-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .news-item {
      border-radius: var(--radius-md);
      padding: 10px 12px;
      background: linear-gradient(to right, #ffffff, #f9fafb);
      box-shadow: 0 1px 4px rgba(15,23,42,.05);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: transform var(--transition-fast), box-shadow var(--transition-fast), background 200ms ease-out;
    }

    .news-item::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(248,113,113,.22), transparent 55%);
      opacity: 0;
      transition: opacity var(--transition-fast);
      pointer-events: none;
    }

    .news-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 24px rgba(15,23,42,.18);
      background: #ffffff;
    }

    .news-item:hover::before {
      opacity: 1;
    }

    .news-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--text-main);
    }

    .news-meta-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 11px;
      color: var(--text-sub);
    }

    .news-badge {
      padding: 2px 8px;
      border-radius: 999px;
      background: #fee2e2;
      color: var(--primary-dark);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: .12em;
      white-space: nowrap;
    }

    .news-summary {
      font-size: 12px;
      color: var(--text-sub);
      margin-top: 6px;
    }

    /* ===== NỘI DUNG BÀI ===== */
    .content-header {
      margin-bottom: 14px;
    }

    .content-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .content-meta {
      font-size: 12px;
      color: var(--text-sub);
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .meta-dot {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: #d1d5db;
    }

    .article-body p {
      margin-bottom: 10px;
      font-size: 14.5px;
      color: #111827;
    }

    .placeholder {
      font-size: 14px;
      color: var(--text-sub);
    }

    .placeholder span {
      color: var(--primary);
      font-weight: 600;
    }

    /* ===== OVERLAY QUẢNG CÁO TOÀN TRANG ===== */
    .ad-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 220ms ease-out;
    }

    .ad-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .ad-box {
      background: #020617;
      max-width: 380px;
      width: 90%;
      padding: 20px 18px 18px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 24px 60px rgba(15,23,42,.9);
      border: 1px solid rgba(148,163,184,.5);
      transform: translateY(14px) scale(.96);
      transition: transform 220ms ease-out;
    }

    .ad-overlay.visible .ad-box {
      transform: translateY(0) scale(1);
    }

    .ad-logo {
      max-width: 180px;
      max-height: 50px;
      margin-bottom: 8px;
    }

    .ad-title {
      font-size: 16px;
      letter-spacing: .18em;
      text-transform: uppercase;
      margin-bottom: 4px;
      color: #e5e7eb;
    }

    .ad-subtitle {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 12px;
    }

    .ad-count-number {
      font-size: 36px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 2px;
    }

    .ad-count-label {
      font-size: 13px;
      color: #e5e7eb;
      margin-bottom: 8px;
    }

    .ad-status {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 12px;
      min-height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .ad-button-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .ad-button {
      flex: 1;
      padding: 8px 12px;
      border-radius: 999px;
      border: 0;
      font-size: 13px;
      cursor: pointer;
      transition: transform var(--transition-fast), box-shadow var(--transition-fast),
                  background var(--transition-fast), color var(--transition-fast);
    }

    .ad-primary {
      background: linear-gradient(to right, #fb923c, var(--accent));
      color: #ffffff;
      box-shadow: 0 10px 24px rgba(248,113,113,.5);
    }

    .ad-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(248,113,113,.6);
    }

    .ad-note {
      font-size: 11px;
      color: #6b7280;
    }

    /* ===== ANIMATION ===== */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(6px); }
      to   { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header>
    <div class="header-inner">
      <div class="logo-wrap">
        <!-- LOGO: tingo-logo.png -->
        <img src="tingo-logo.png" alt="TINGO Logo" class="logo">
      </div>
      <div class="header-text">
        <h1>TINGO NEWS</h1>
        <p>FAST · CONVENIENT · AUTHENTIC – Tin tức chọn lọc mỗi ngày</p>
      </div>
    </div>

    <!-- THANH CHUYÊN MỤC -->
    <nav class="category-bar">
      <button class="cat-btn active" data-cat="all">
        <span class="cat-dot"></span> Tất cả
      </button>
      <button class="cat-btn" data-cat="Thời sự">
        <span class="cat-dot"></span> Thời sự
      </button>
      <button class="cat-btn" data-cat="Công nghệ">
        <span class="cat-dot"></span> Công nghệ
      </button>
      <button class="cat-btn" data-cat="Đời sống">
        <span class="cat-dot"></span> Đời sống
      </button>
    </nav>
  </header>

  <!-- ===== LAYOUT CHÍNH ===== -->
  <main class="page-wrap">
    <section class="container">
      <!-- SIDEBAR: DANH SÁCH TIN -->
      <aside class="card">
        <div class="sidebar-header">
          <div>
            <div class="sidebar-title">Tin mới</div>
            <div class="sidebar-tag">Cập nhật trong ngày</div>
          </div>
        </div>
        <ul id="newsList" class="news-list"></ul>
      </aside>

      <!-- CONTENT: NỘI DUNG BÀI -->
      <article class="card">
        <div id="articleContent">
          <p class="placeholder">
            Chọn một bài ở cột <span>Tin mới</span> để xem nội dung.  
            Khi vào trang, hệ thống sẽ tự mở ưu đãi Shopee sau vài giây (lặp tối đa 1 lần mỗi 2 phút).
          </p>
        </div>
      </article>
    </section>
  </main>

  <!-- ===== OVERLAY QUẢNG CÁO TOÀN TRANG ===== -->
  <div id="adOverlay" class="ad-overlay">
    <div class="ad-box">
      <img src="tingo-logo.png" alt="TINGO Logo" class="ad-logo">
      <div class="ad-title">TINGO AUTO</div>
      <div class="ad-subtitle">TỰ ĐỘNG CHUYỂN SANG ƯU ĐÃI SHOPEE</div>

      <div id="adCountNumber" class="ad-count-number">-</div>
      <div class="ad-count-label">giây nữa sẽ mở Shopee</div>

      <div id="adStatus" class="ad-status">
        Đang kiểm tra lần chuyển gần nhất...
      </div>

      <div class="ad-button-row">
        <button id="adOpenNow" class="ad-button ad-primary">
          Mở Shopee ngay
        </button>
      </div>

      <div class="ad-note">
        Sau khi mở, bạn có thể đọc tin bình thường. Lần tự mở tiếp theo chỉ diễn ra sau <strong>2 phút</strong>.
      </div>
    </div>
  </div>

  <!-- ===== SCRIPT ===== -->
  <script>
    /* ===== CẤU HÌNH AFFILIATE =====
       TODO: sửa link này thành link Shopee affiliate của bạn */
    const SHOPEE_URL = "https://shopee.vn/";
    const COUNTDOWN_SECONDS = 3;                // đếm ngược 3 giây
    const INTERVAL_MS = 2 * 60 * 1000;          // lặp mỗi 2 phút
    const STORAGE_KEY = "tingo_global_redirect";

    const adOverlay = document.getElementById("adOverlay");
    const adCountNumber = document.getElementById("adCountNumber");
    const adStatus = document.getElementById("adStatus");
    const adOpenNowBtn = document.getElementById("adOpenNow");

    let countdownTimer = null;
    let waitTimer = null;

    function openShopee() {
      localStorage.setItem(STORAGE_KEY, Date.now().toString());
      window.open(SHOPEE_URL, "_blank");
    }

    function showOverlay() {
      adOverlay.classList.add("visible");
    }

    function hideOverlay() {
      adOverlay.classList.remove("visible");
    }

    function startCountdown() {
      clearInterval(countdownTimer);
      showOverlay();
      let remain = COUNTDOWN_SECONDS;

      adCountNumber.textContent = remain.toString();
      adStatus.textContent = "Đang chuẩn bị chuyển tới ưu đãi Shopee...";

      countdownTimer = setInterval(() => {
        remain--;
        adCountNumber.textContent = remain.toString();
        if (remain <= 0) {
          clearInterval(countdownTimer);
          hideOverlay();
          openShopee();
          scheduleNextLoop();  // set lần chạy tiếp theo
        }
      }, 1000);
    }

    function scheduleNextLoop() {
      clearTimeout(waitTimer);

      const last = parseInt(localStorage.getItem(STORAGE_KEY) || "0", 10);
      const now = Date.now();
      const diff = now - last;
      const remainMs = INTERVAL_MS - diff;

      if (!last || remainMs <= 0) {
        // Chưa từng chuyển hoặc đã quá 2 phút -> chạy ngay
        startCountdown();
        return;
      }

      // Còn thời gian phải chờ trước khi được tự mở lại
      const remainSec = Math.ceil(remainMs / 1000);
      adCountNumber.textContent = "-";
      adStatus.textContent =
        "Đã chuyển tới Shopee trong 2 phút gần đây. Đếm ngược lần tiếp theo sẽ bắt đầu sau " +
        remainSec + " giây.";

      hideOverlay(); // cho user đọc tin, chỉ hiện lại khi sắp mở
      waitTimer = setTimeout(startCountdown, remainMs);
    }

    adOpenNowBtn.addEventListener("click", () => {
      hideOverlay();
      openShopee();
      scheduleNextLoop();
    });

    /* ===== TIN TỨC DEMO ===== */
    const articles = [
      {
        id: '1',
        title: 'Giá xăng giảm, giá hàng hóa có hạ nhiệt?',
        date: '15/11/2025',
        category: 'Thời sự',
        summary: 'Sau nhiều lần điều chỉnh giá xăng, người dân trông chờ giá hàng hoá giảm theo.',
        content: `
          <p>Sau kỳ điều chỉnh mới đây, giá xăng trong nước đã giảm nhẹ, tạo kỳ vọng
          giá hàng hóa thiết yếu sẽ hạ nhiệt theo. Tuy nhiên, trên thực tế, nhiều
          mặt hàng vẫn giữ nguyên mức giá cũ.</p>
          <p>Chuyên gia cho rằng cần thêm thời gian để doanh nghiệp điều chỉnh chi
          phí, và người tiêu dùng nên chủ động so sánh giá, tận dụng chương trình
          khuyến mãi khi mua sắm.</p>
        `
      },
      {
        id: '2',
        title: 'Smartphone tầm trung đang cạnh tranh khốc liệt',
        date: '15/11/2025',
        category: 'Công nghệ',
        summary: 'Nhiều mẫu máy mới ra mắt cấu hình mạnh, giá dễ tiếp cận.',
        content: `
          <p>Phân khúc smartphone tầm trung đang chứng kiến cuộc đua cấu hình
          và camera giữa các hãng lớn. Người dùng có nhiều lựa chọn với mức
          giá dưới 7 triệu nhưng vẫn sở hữu màn hình đẹp, pin trâu.</p>
          <p>Các chương trình giảm giá, trả góp 0% và quà tặng kèm theo cũng là
          yếu tố thu hút người mua trong giai đoạn cuối năm.</p>
        `
      },
      {
        id: '3',
        title: 'Xu hướng ăn uống lành mạnh của giới trẻ',
        date: '14/11/2025',
        category: 'Đời sống',
        summary: 'Giới trẻ chuyển sang tự nấu ăn, dùng thực phẩm organic nhiều hơn.',
        content: `
          <p>Ngày càng nhiều bạn trẻ quan tâm đến chế độ ăn lành mạnh để giữ dáng
          và cải thiện sức khỏe. Các món salad, sinh tố, ngũ cốc nguyên hạt được
          ưa chuộng hơn đồ ăn nhanh.</p>
          <p>Các cửa hàng thực phẩm sạch, đồ bếp tiện lợi và hộp đựng meal prep
          bán rất chạy trên các sàn thương mại điện tử.</p>
        `
      }
    ];

    const newsListEl = document.getElementById('newsList');
    const articleContentEl = document.getElementById('articleContent');
    const categoryButtons = document.querySelectorAll('.cat-btn');

    let currentCategory = 'all';

    function renderNewsList() {
      newsListEl.innerHTML = '';

      const filtered = articles.filter(article => {
        if (currentCategory === 'all') return true;
        return article.category === currentCategory;
      });

      if (filtered.length === 0) {
        newsListEl.innerHTML = '<li class="news-item"><div class="news-title">Chưa có bài cho chuyên mục này.</div></li>';
        return;
      }

      filtered.forEach(article => {
        const li = document.createElement('li');
        li.className = 'news-item';
        li.innerHTML = `
          <div class="news-title">${article.title}</div>
          <div class="news-meta-row">
            <div>${article.date}</div>
            <div class="news-badge">${article.category}</div>
          </div>
          <div class="news-summary">${article.summary}</div>
        `;
        li.addEventListener('click', () => openArticle(article.id));
        newsListEl.appendChild(li);
      });
    }

    function openArticle(id) {
      const article = articles.find(a => a.id === id);
      if (!article) return;

      articleContentEl.innerHTML = `
        <div class="content-header">
          <h2 class="content-title">${article.title}</h2>
          <div class="content-meta">
            <span>${article.date}</span>
            <span class="meta-dot"></span>
            <span>${article.category}</span>
          </div>
        </div>
        <div class="article-body">
          ${article.content}
        </div>
      `;

      const y = articleContentEl.getBoundingClientRect().top + window.scrollY - 90;
      window.scrollTo({ top: y, behavior: 'smooth' });
    }

    categoryButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        categoryButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentCategory = btn.getAttribute('data-cat');

        articleContentEl.innerHTML = `
          <p class="placeholder">
            Chọn một bài viết trong chuyên mục
            <span>${currentCategory === 'all' ? 'Tất cả' : currentCategory}</span> để đọc.
          </p>
        `;

        renderNewsList();
      });
    });

    // Khởi tạo
    renderNewsList();
    scheduleNextLoop();   // bắt đầu logic tự mở Shopee
  </script>
</body>
</html>
